<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>Dashboard - DeepShare Admin</title>

		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="assets/css/bootstrap.css" />
		<link rel="stylesheet" href="assets/css/font-awesome.css" />

		<link rel="shortcut icon" href="assets/images/favicon.ico">
		<link rel="Bookmark" href="assets/images/favicon.ico">

		<!-- page specific plugin styles -->

		<!-- text fonts -->
		<link rel="stylesheet" href="assets/css/ace-fonts.css" />
		<link rel="stylesheet" href="assets/css/select2.css" />
		<link rel="stylesheet" href="assets/css/daterangepicker.css" />
		<link rel="stylesheet" href="assets/css/datepicker.css" />

		<!-- ace styles -->
		<link rel="stylesheet" href="assets/css/ace.css" class="ace-main-stylesheet" id="main-ace-style" />

		<!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.css" class="ace-main-stylesheet" />
		<![endif]-->

		<!--[if lte IE 9]>
		  <link rel="stylesheet" href="assets/css/ace-ie.css" />
		<![endif]-->

		<!-- inline styles related to this page -->

		<!-- ace settings handler -->
		<script src="assets/js/ace/ace-extra.js"></script>

		<!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

		<!--[if lte IE 8]>
		<script src="assets/js/html5shiv.js"></script>
		<script src="assets/js/respond.js"></script>
		<![endif]-->
		<style>
			.dropdown-content li.active{
				border-left: 4px solid #00adef;
			}
			.nav-user-photo {
				height: 30px;
				width: 30px;
			}
		</style>

		<link rel="stylesheet" href="assets/css/qd.css" />
	</head>

	<body class="no-skin">
		<!-- #section:basics/navbar.layout -->
		<div id="navbar" class="navbar navbar-default" style="background-color: white">
			<script type="text/javascript">
				try{ace.settings.check('navbar' , 'fixed')}catch(e){}
			</script>

			<div class="navbar-container" id="navbar-container" >

				<!-- #section:basics/sidebar.mobile.toggle -->
				<!-- <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
					<span class="sr-only">Toggle sidebar</span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>
				</button> -->
			

				<!-- /section:basics/sidebar.mobile.toggle -->
				<div class="navbar-header pull-left" style="padding-left:30px">
					<!-- #section:basics/navbar.layout.brand -->
					<a href="#" class="navbar-brand">
						<small>
							<i> <img src="assets/images/logo_inside.png" width="130px"> </i>
						</small>
					</a>

				</div>

				<!-- #section:basics/navbar.dropdown -->
				<div class="navbar-buttons navbar-header pull-right" role="navigation">
					<ul class="nav ace-nav">
						<li class="white-opaque">
								<a data-toggle="dropdown" class="dropdown-toggle" href="#">
									<img class="nav-user-photo" src="assets/images/app_icon.png"  />
									<span><b id="app-title" style="color:black"></b></span>
									<i class="ace-icon fa fa-caret-down" style="color:black"></i>
								</a>

								<ul class="dropdown-menu-right dropdown-navbar dropdown-menu dropdown-caret dropdown-close">
									<li class="dropdown-content">
										<ul class="dropdown-menu dropdown-navbar applistDrop" id="applist">
										</ul>
									</li>

									<li class="dropdown-footer">
										<a href="addapp.html">
											添加应用
											<i class="menu-icon fa fa-tag"></i>
										</a>
									</li>
								</ul>
						</li>
						<li class="white-opaque" >
		                   		<a data-toggle="dropdown" href="#" class="dropdown-toggle">
									<img class="nav-user-photo" src="assets/images/user_ico.png" />
									<span class="user-info" style="color:black">
										<small>欢迎,</small>
										guest
									</span>
									<i class="ace-icon fa fa-caret-down" style="color:black"></i>
								</a>

								<ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
									<li>
										<a href="#">
											<i class="ace-icon fa fa-cog"></i>
											设置
										</a>
									</li>

									<li>
										<a href="profile.html">
											<i class="ace-icon fa fa-user"></i>
											账号管理
										</a>
									</li>

									<li class="divider"></li>

									<li>
										<a href="/session/logout">
											<i class="ace-icon fa fa-power-off"></i>
											登出
										</a>
									</li>
								</ul>
						</li>
						<!-- /section:basics/navbar.user_menu -->

				    </ul>
				</div>

				<!-- /section:basics/navbar.dropdown -->
			</div><!-- /.navbar-container -->
		</div>

		<!-- /section:basics/navbar.layout -->
		<div class="main-container" id="main-container">
			<script type="text/javascript">
				try{ace.settings.check('main-container' , 'fixed')}catch(e){}
			</script>

			<!-- #section:basics/sidebar -->
			<div id="sidebar" class="sidebar responsive">
				<script type="text/javascript">
					try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
				</script>

				<ul class="nav nav-list">
					<li class="active highlight">
						<a href="index.html">
							<i class="menu-icon fa fa-tachometer"></i>
							<span class="menu-text"> Dashboard </span>
						</a>
						<b class="arrow"></b>
					</li>

					<li class="active">
						<a href="index.html">
							<i class="menu-icon fa fa-list-alt"></i>
							<span class="menu-text"> 数据概览 </span>
						</a>
						<b class="arrow"></b>
					</li>
					
					<li class="">
						<a href="marketing.html">
							<i class="menu-icon fa fa-link "></i>
							<span class="menu-text"> 渠道监测 </span>
						</a>
						<b class="arrow"></b>
					</li>

				</ul><!-- /.nav-list -->

				<!-- #section:basics/sidebar.layout.minimize -->
				<div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
					<i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
				</div>

				<!-- /section:basics/sidebar.layout.minimize -->
				<script type="text/javascript">
					try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
				</script>
			</div>

			<!-- /section:basics/sidebar -->
			<div class="main-content">
				<div class="main-content-inner">
					<!-- #section:basics/content.breadcrumbs -->
					<div class="breadcrumbs" id="breadcrumbs">
						<script type="text/javascript">
							try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
						</script>

						<ul class="breadcrumb">
							<li>
								<i class="ace-icon fa fa-home home-icon"></i>
								<a href="#">Home</a>
							</li>
							<li class="active">Dashboard</li>
						</ul><!-- /.breadcrumb -->

						<!-- #section:basics/content.searchbox -->
						<!-- <div class="nav-search" id="nav-search">
							<form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="ace-icon fa fa-search nav-search-icon"></i>
								</span>
							</form>
						</div> --><!-- /.nav-search -->
						<!-- /section:basics/content.searchbox -->
					</div>

					<!-- /section:basics/content.breadcrumbs -->
					<div class="page-content">

						<!-- /section:settings.box -->
						<div class="page-header">
							<h1>
								Dashboard
								<small>
									<i class="ace-icon fa fa-angle-double-right"></i>
									数据概览
								</small>
							</h1>
						</div><!-- /.page-header -->

						<div class="row">
							<div class="col-xs-12">
								
								<div class="row">
									<div class="space-6"></div>
									<div class="col-infobox infobox-container">
										<!-- #section:pages/dashboard.infobox -->
										<div class="infobox infobox-green">
											<!-- #section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-chart">
												<img src = 'assets/images/install_today_ico.png' style = "width:100%"/>
											    <!--
												<span class="sparkline" data-values="196,128,202,177,154,94,100,170,224"></span>
												-->
											</div>

											<!-- /section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-data">
												<div class="infobox-content center" style="color:grey"><b>今日安装</b></div>
												<span class="infobox-data-number center" id="install_today" style="color:grey"></span>
												
											</div>

											<!-- <div class="badge badge-success">
												7.2%
												<i class="ace-icon fa fa-arrow-up"></i>
											</div> -->
										</div>
										<div class="infobox infobox-green">
											<!-- #section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-chart">
												<img src = 'assets/images/use_today_ico.png' style = "width:100%"/>
											</div>

											<!-- /section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-data">
												<div class="infobox-content center" style="color:grey"><b>今日使用</b></div>
												<span class="infobox-data-number center" id="open_today" style="color:grey"></span>	
											</div>
										</div>
										<div class="infobox infobox-blue">
											<!-- #section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-chart">
												<img src = 'assets/images/install_yes_ico.png' style = "width:100%"/>
											</div>

											<!-- /section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-data">
												<div class="infobox-content center" style="color:grey"><b>昨日安装</b></div>
												<span class="infobox-data-number center" id="install_last_day" style="color:grey"></span>		
											</div>
										</div>
										<div class="infobox infobox-blue">
											<!-- #section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-chart">
												<img src = 'assets/images/use_yes_ico.png' style = "width:100%"/>
											</div>
											<!-- /section:pages/dashboard.infobox.sparkline -->
											<div class="infobox-data">
												<div class="infobox-content center" style="color:grey"><b>昨日使用</b></div>
												<span class="infobox-data-number center" id="open_last_day" style="color:grey"></span>
											</div>
										</div>
									</div>
									<div class="space-12-sm"></div>
								</div><!-- /.row -->

								<div class="hr hr32 hr-dotted"></div>
								<div class="row">
									<div class="col-sm-12">
										<ul class="pagination">
											<li id = "hourcount">
												<a href="#" >按时统计</a>
											</li>
											<li class="active" id = "daycount">
												<a href="#">按天统计</a>
											</li>
											<li id = "weekcount">
												<a href="#">按周统计</a>
											</li>
											<li id = "monthcount">
												<a href="#" >按月统计</a>
											</li>
										</ul>

										<span class="dropdown" style = "float:right; margin-right:30px">
   											<button class="btn dropdown-toggle btn-sm btn-info" id="dropdownMenu2" data-toggle="dropdown">
											      图像种类
											      <span class="caret"></span>
											   </button>
											   <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu2" id="echartTypeList">											   
											      <li role="presentation">
											         <a role="menuitem" tabindex="-1" href="javascript:selectChartTpye(0);">折线图</a>
											      </li>
											      <li role="presentation">
											         <a role="menuitem" tabindex="-1" href="javascript:selectChartTpye(1)">饼状图</a>
											      </li>
											   
											   </ul>
											</span>
									</div>
									<div class="col-sm-12">
										<div class="col-sm-6">
										<h3>
											<text>数据走势</text>
											<span class="dropdown">
   											<button class="btn dropdown-toggle btn-sm btn-info" id="dropdownMenu1" data-toggle="dropdown">
											      渠道名称
											      <span class="caret"></span>
											   </button>
											   <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1" id="chanelList">

											   <!-- 
											      <li role="presentation">
											         <a role="menuitem" tabindex="-1" href="#">Java</a>
											      </li>
											      <li role="presentation">
											         <a role="menuitem" tabindex="-1" href="#">数据挖掘</a>
											      </li>
											    -->
											   </ul>
											</span>

										</h3>
										</div>
										<!--
										<div class="col-sm-3" style="margin-top: 24px;text-align: right;
								font-size: 14px;font-weight: bold;color: #2283c5">
									选择时段:
										</div>
										<div class="col-sm-3">
											<div class="input-daterange input-group" style="margin-top: 20px">
												<input type="text" class="input-sm form-control" name="start"/>
												<span class="input-group-addon">
													<i class="fa fa-exchange"></i>
												</span>

												<input type="text" class="input-sm form-control" name="end"/>
											</div>
										</div> -->
								</div>

								 	</div>

									<div id="datachart" class="col-sm-12" >
									<!--
										<div class="col-sm-6">
											<div id="main" style="height:400px;"></div>
										</div>

	                                    <div class="col-sm-6">
	                                        <div id="main1" style="height:400px;"></div>
	                                    </div> 

	                                    <div class="col-sm-12">
											<div id="wechatpie" style="height:400px;"></div>
										</div> 
									-->
	                                </div>
	                             </div>
							</div><!-- /.col -->
						</div><!-- /.row -->
					</div><!-- /.page-content -->
				</div>
			</div><!-- /.main-content -->

			<div class="footer">
				<div class="footer-inner">
					<!-- #section:basics/footer -->
					<div class="footer-content">
						<span class="bigger-120">
							<span class="blue bolder">DeepShare</span>
							Application &copy; 2015
						</span>
					</div>
					<!-- /section:basics/footer -->
				</div>
			</div>

			<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
				<i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
			</a>
		</div><!-- /.main-container -->

		<!-- basic scripts -->

		<!--[if !IE]> -->
		<script type="text/javascript">
			window.jQuery || document.write("<script src='assets/js/jquery/jquery.js'>"+"<"+"/script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
		<script type="text/javascript">
		 window.jQuery || document.write("<script src='assets/js/jquery1x.js'>"+"<"+"/script>");
		</script>
		<![endif]-->
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery/jquery.mobile.custom.js'>"+"<"+"/script>");
		</script>
		<script src="assets/js/bootstrap.js"></script>

		<!-- page specific plugin scripts -->

		<!--[if lte IE 8]>
		  <script src="assets/js/excanvas.js"></script>
		<![endif]-->
		<script src="assets/js/jquery/jquery-ui.custom.js"></script>
		<script src="assets/js/jquery/jquery.ui.touch-punch.js"></script>
		<script src="assets/js/jquery/jquery.easypiechart.js"></script>
		<script src="assets/js/jquery/jquery.sparkline.js"></script>
		<script src="assets/js/select2.js"></script>
		
		<!-- ace scripts -->
		<script src="assets/js/ace/elements.scroller.js"></script>
		<script src="assets/js/ace/elements.wizard.js"></script>
		<script src="assets/js/ace/elements.aside.js"></script>
		<script src="assets/js/ace/ace.js"></script>
		<script src="assets/js/ace/ace.ajax-content.js"></script>
		<script src="assets/js/ace/ace.sidebar.js"></script>
		<script src="assets/js/ace/ace.sidebar-scroll-1.js"></script>
		<script src="assets/js/ace/ace.widget-box.js"></script>
		<script src="assets/js/ace/ace.widget-on-reload.js"></script>

		<script src="assets/js/chart/echarts.js"></script>
		<script type="text/javascript">
	        
	    </script>
		<!-- inline scripts related to this page -->

		<script type="text/javascript">
            //console.log("pos0");

            //console.log("is : " + ace.sidebar);


            var appidPre = 0
			var granPre = 0
			var appNames;

            echartsOption = {};
            echartsOption.gran = "day";  

            
			function addDate(dadd){
				var a = new Date();
				a = a.valueOf();
				a = a + dadd * 24 * 60 * 60 * 1000;
				a = new Date(a);
				//console.log(a);
				return a;
			}

			function getAppname() {
				/*
				$.ajax({    
				    type: "GET",
                    dataType: "json",
                    url: "/apps",
                    success:function (result) { */
                    	var result = {"applist":[{"appid":"9A935D78B9C86DB6","appname":"23123","channelinfo":[{"typename":"A", "channelname":"1"}, {"typename":"A", "channelname":"2"}]},{"appid":"7B4503E397E153A9","appname":"3434","channelinfo":[{"typename":"B", "channelname":"1"}, {"typename":"B", "channelname":"2"}]},{"appid":"44F250A9D4917B5C","appname":"啊啊啊","channelinfo":[{"typename":"C", "channelname":"1"}, {"typename":"C", "channelname":"2"}]}]};

						appNames = result.applist;
						echartsOption.appIndex = 0;
						echartsOption.channelIndex = 0;
						echartsOption.chartType = 0;
						printAppname();
						printChannelName();
						printData();
                /*    },
                    error: function(data) {
	                    alert("error 1:"+data.responseText);
                    }
                }); */
			};
			getAppname();

			function selectAppIndex(selectedAppIndex) {
				//console.log("selectAppIndex " + selectedAppIndex);
				echartsOption.appIndex = selectedAppIndex;
				printChannelName();
				echartsOption.channelIndex = 0;
				printData();
			}

			function printAppname() {
				//console.log(appNames);
				$("#app-title").html(appNames[echartsOption.appIndex].appname);
				$("#applist").empty();
				for(var a in appNames) {
					$("#applist").append('<li class='+(a==echartsOption.appIndex?'active':'')+'>'+'<a href="javascript:selectAppIndex('+a+')"><div class="clearfix"><span class="pull-left">'+appNames[a].appname+'</span>'+'<span class="pull-right"><i class="fa fa-check"></i></span></div></a></li>');
                    }
			};
			//printAppname();

			function selectChannelIndex(selectedChannelIndex) {
				//console.log("selectChannelIndex " + selectedChannelIndex);
				echartsOption.channelIndex = selectedChannelIndex;
				printData();

			}
			function printChannelName() {
				$("#chanelList").empty();
				var appInd = echartsOption.appIndex;
				for (var a in appNames[appInd].channelinfo) {
					$("#chanelList").append('<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:selectChannelIndex('+a+')">'+appNames[appInd].channelinfo[a].typename + ' ' + appNames[appInd].channelinfo[a].channelname + '</a></li>');
				}
			}

			function selectChartTpye(selectedChartTpye) {
				echartsOption.chartType = selectedChartTpye;
				printData();
			}

			function printData() {
				if (echartsOption.channelIndex == -1) {
					$("#datachart").empty();
					$("#open_today").html(0);
                    $("#install_today").html(0);
                    $("#open_last_day").html(0);
                    $("#install_last_day").html(0);
					return;
				}

				/*
				$.ajax({
                    type: "GET",
                    dataType: "json",
                    url: "/apps/"+appNames[echartsOption.appIndex].appid+"?typename="+appNames[echartsOption.appIndex].channelinfo[echartsOption.channelIndex].typename+"&channelname="+appNames[echartsOption.appIndex].channelinfo[echartsOption.channelIndex].channelname+"&gran=day&limit=2",
                    success: function (result) { */
                    	var result = {"data":[{"open_with_param":321,"install_with_param":213},{"open_with_param":432,"install_with_param":123}]};
                    	$("#open_today").html(result.data[0].open_with_param);
                    	$("#install_today").html(result.data[0].install_with_param);
                        $("#open_last_day").html(result.data[1].open_with_param);
                        $("#install_last_day").html(result.data[1].install_with_param);

                                /*         },
                    error: function(data) {
	                    //alert("error2:"+data.responseText);
                    }
                }); */


				if (echartsOption.chartType == 0)
						$("#datachart").html('<div class="col-sm-6"><div id="main" style="height:400px;"></div></div><div class="col-sm-6"><div id="main1" style="height:400px;"></div></div>');
					else if (echartsOption.chartType == 1) 
						   $("#datachart").html(' <div class="col-sm-12" style="height:450px"><div id="wechatpie" style="height:400px;"></div></div>');
				/*
				$.ajax({
                    type: "GET",
                    dataType: "json",
                    url: "/apps/"+appNames[echartsOption.appIndex].appid+"?typename="+appNames[echartsOption.appIndex].channelinfo[echartsOption.channelIndex].typename+"&channelname="+appNames[echartsOption.appIndex].channelinfo[echartsOption.channelIndex].channelname+"&gran="+echartsOption.gran+"&limit=10",
                    success: function (result) { */


		                //console.log("pos01");
		                var result = {"data":[{"open_with_param":3,"install_with_param":2,"userlink_wechat":20},{"open_with_param":4,"install_with_param":4,"userlink_wechat":20},{"open_with_param":5,"install_with_param":4,"userlink_wechat":20},{"open_with_param":2,"install_with_param":4,"userlink_wechat":20},{"open_with_param":4,"install_with_param":6,"userlink_wechat":20},{"open_with_param":1,"install_with_param":8,"userlink_wechat":20},{"open_with_param":9,"install_with_param":2,"userlink_wechat":20},{"open_with_param":8,"install_with_param":6,"userlink_wechat":20},{"open_with_param":4,"install_with_param":3,"userlink_wechat":20},{"open_with_param":6,"install_with_param":9,"userlink_wechat":20}]};
		                //console.log("pos02");
                        
                        var x = new Array(); 
                        var openlist = new Array(); 
                        var installlist = new Array(); 
                        var otherlist = new Array();
                        var numberOfData = result.data.length - 1;
                        for(var i in result.data) {
                            //x[i] = addDate(i-result.data.length).getDate();
                            x[i] = "" + (i - result.data.length);
                        	openlist[i] = result.data[numberOfData - i].open_with_param;
                        	installlist[i] = result.data[numberOfData - i].install_with_param;
                        	otherlist[i] = result.data[numberOfData - i].userlink_wechat - openlist[i] - installlist[i];
                        }

                        //console.log(x);
                        require.config({
            	            paths: {
            	            	echarts: 'assets/js'
            	            }
            	        });
            	        if (echartsOption.chartType == 0)
            	        require(
            	                [
            	                    'echarts',
            	                    'echarts/chart/line'
            	                ],
            	                function (ec) {
            	                    var myChart = ec.init(document.getElementById('main'));
            	                    var option = {
                                            color : ["#ff7f50"],
                                
            	                    	    title : {
            	                    	    //    text: '安装',
            	                    	    //    subtext: '新用户激活'
            	                    	    },
            	                    	    tooltip : {
            	                    	        trigger: 'axis'
            	                    	    },
            	                    	    legend: {
            	                    	        data:['新用户安装']
            	                    	    },
            	                    	    toolbox: {
            	                    	        show : true,
            	                    	        feature : {
            	                    	            dataView : {show: true, readOnly: false},
            	                    	            saveAsImage : {show: true}
            	                    	        }
            	                    	    },
            	                    	    calculable : true,
            	                    	    xAxis : [
            	                    	        {
            	                    	            type : 'category',
            	                    	            boundaryGap : false,
            	                    	            data : x
            	                    	        }
            	                    	    ],
            	                    	    yAxis : [
            	                    	        {
            	                    	            type : 'value',
            	                    	            axisLabel : {
            	                    	                formatter: '{value}'
            	                    	            }
            	                    	        }
            	                    	    ],
            	                    	    series : [
            	                    	        {
            	                    	            name:'新用户安装',
            	                    	            type:'line',
            	                    	            data:installlist,
            	                    	            markPoint : {
            	                    	                data : [
            	                    	                    {type : 'max', name: '最大值'},
            	                    	                    {type : 'min', name: '最小值'}
            	                    	                ]
            	                    	            }
            	                    	        }
            	                    	    ]
            	                    	};
            	                    	                    
            	                    myChart.setOption(option);
            	                }
                                );
						if (echartsOption.chartType == 0)
            	        require(
            	                [
            	                    'echarts',
            	                    'echarts/chart/line'
            	                ],
            	                function (ec) {
            	                    var myChart = ec.init(document.getElementById('main1'));
            	                    var option = {
                                            color : ["#87cefa"],
                                
            	                    	    title : {
            	                    	   //    text: '打开',
            	                    	   //     subtext: '示例'
            	                    	    },
            	                    	    tooltip : {
            	                    	        trigger: 'axis'
            	                    	    },
            	                    	    legend: {
            	                    	        data:['老用户打开']
            	                    	    },
            	                    	    toolbox: {
            	                    	        show : true,
            	                    	        feature : {
            	                    	            dataView : {show: true, readOnly: false},
            	                    	            saveAsImage : {show: true}
            	                    	        }
            	                    	    },
            	                    	    calculable : true,
            	                    	    xAxis : [
            	                    	        {
            	                    	            type : 'category',
            	                    	            boundaryGap : false,
            	                    	            data : x
            	                    	        }
            	                    	    ],
            	                    	    yAxis : [
            	                    	        {
            	                    	            type : 'value',
            	                    	            axisLabel : {
            	                    	                formatter: '{value}'
            	                    	            }
            	                    	        }
            	                    	    ],
            	                    	    series : [
            	                    	        {
            	                    	            name:'老用户打开',
            	                    	            type:'line',
            	                    	            data:openlist,
            	                    	            markPoint : {
            	                    	                data : [
            	                    	                    {type : 'max', name: '最大值'},
            	                    	                    {type : 'min', name: '最小值'}
            	                    	                ]
            	                    	            }
            	                    	        }
            	                    	    ]
            	                    	};
            	                    	                    
            	                    myChart.setOption(option);
            	                }
                                );
						if (echartsOption.chartType == 1)
						require(

					            [
					                'echarts',
					                'echarts/chart/pie' // 使用柱状图就加载bar模块，按需加载
					            ],

					            function (ec) {
					                // 基于准备好的dom，初始化echarts图表
										optionWechatpie = {											
										    timeline : {
										        data : x,
										        label : {
										            formatter : function(s) {
										            	return s;
										                //return s.slice(0, 7);
										            }
										        }
										    },
										    options : [
										        {
										            title : {
										              //  text: "apptitle",
										                subtext: 'Wechat朋友圈',
										                x:'center'
										            },
										            tooltip : {
										                trigger: 'item',
										                formatter: "{a} <br/>{b} : {c} ({d}%)"
										            },
										            legend: {
										                orient : 'vertical',
										                x : 'left',
										                data:['新下载','打开APP','其它']
										            },

										            series : [
										                {
										                    name:'WeChat 朋友圈分享',
										                    type:'pie',
										                    center: ['50%', '45%'],
										                    radius: '50%',
										                    data:[
										                        {value: 1,  name:'新下载'},
										                        {value: 1,  name:'打开APP'},
										                        {value: 1, name:'其它'}
										                    ]
										                }
										            ]
										        }
										    ]
									};
									var tmpOption =  {
													        series : [
													                {
													                    data:[
													                        {value: 1,  name:'新下载'},
													                        {value: 1,  name:'打开APP'},
													                        {value: 1, name:'其它'}
													                    ]
													                }
													            ]
													    }
									//optionWechatpie.options[0].series[]
									if (installlist.length > 0) {
										optionWechatpie.options[0].series[0].data[0].value = installlist[0];
										optionWechatpie.options[0].series[0].data[1].value = openlist[0];
										optionWechatpie.options[0].series[0].data[2].value = otherlist[0];

									}
									for (i = 1; i < installlist.length; i ++) {
										var tmp = new Object();
										$.extend(true, tmp, tmpOption);
										tmp.series[0].data[0].value = installlist[i];
										tmp.series[0].data[1].value = openlist[i];
										tmp.series[0].data[2].value = otherlist[i];//userlink_wechat[i] - installlist[i] - openlist[i];
										optionWechatpie.options.push(tmp);

									}

									var wechatpie = ec.init(document.getElementById('wechatpie')); 
					                wechatpie.setOption(optionWechatpie); 
								}
							);
                /*         },
                    error: function(data) {
	                    alert("error2:"+data.responseText);
                    }
                }); */ 


			};

			$(document).ready(function(){
				$("#hourcount").click(function() {
					$(".pagination li").removeClass("active");
					$(this).addClass("active");
					echartsOption.gran = "hour";
					printData();
				});
				
				$("#daycount").click(function() {
					$(".pagination li").removeClass("active");
					$(this).addClass("active");
					echartsOption.gran = "day";
					printData();

				});
				$("#weekcount").click(function() {
					$(".pagination li").removeClass("active");
					$(this).addClass("active");
					echartsOption.gran = "week";
					printData();

				});
				$("#monthcount").click(function() {
					$(".pagination li").removeClass("active");
					$(this).addClass("active");
					echartsOption.gran = "month";
					printData();

				});
			});

			jQuery(function($) {
				//printData();
				//console.log("pos02");
				
				$(document).delegate('.applistDrop a', 'click', function(appid){
					//TODO：点击后应该触发切换app的action，所有展示数字全部重新获取
					//getData(传入appid);
					//getData();
					//console.log("pos201");
					var title=$(this).children("div").children("span.pull-left").html();
					//console.log(title);
					$("#app-title").html(title);
					$(this).parent().siblings().removeClass("active");
					$(this).parent().addClass("active");
				}); 
				//console.log("pos03");
				$('[data-rel=tooltip]').tooltip();
				
				$(".select2").css('width','200px').select2({allowClear:true})
				.on('change', function(){
					$(this).closest('form').validate().element($(this));
				}); 
				
				$('.easy-pie-chart.percentage').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
					var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
					var size = parseInt($(this).data('size')) || 50;
					$(this).easyPieChart({
						barColor: barColor,
						trackColor: trackColor,
						scaleColor: false,
						lineCap: 'butt',
						lineWidth: parseInt(size/10),
						animate: /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase()) ? false : 1000,
						size: size
					});
				})
			
				$('.sparkline').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
					$(this).sparkline('html',
									 {
										tagValuesAttribute:'data-values',
										type: 'bar',
										barColor: barColor ,
										chartRangeMin:$(this).data('min') || 0
									 });
				});
			
			
				$('#recent-box [data-rel="tooltip"]').tooltip({placement: tooltip_placement});
				function tooltip_placement(context, source) {
					var $source = $(source);
					var $parent = $source.closest('.tab-content')
					var off1 = $parent.offset();
					var w1 = $parent.width();
			
					var off2 = $source.offset();
					//var w2 = $source.width();
			
					if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
					return 'left';
				}

				$('.dialogs,.comments').ace_scroll({
					size: 300
			    });
							
			})
		</script>
	</body>
</html>
